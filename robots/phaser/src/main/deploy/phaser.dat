#
# This file describes the phaser robot.  For now
# it describes Grond as we are using grond as a base
# for starting development.  Going forward this will base
# update to reflect phaser (the 2019 robot)
#

#
# The definition of the drivebase (for now this is phoenix)
#
hw:tankdrive:leftmotor:1                                        1               # TALON SRX
hw:tankdrive:leftmotor:2                                        2               # TALON SRX
hw:tankdrive:leftmotor:3                                        3               # TALON SRX
hw:tankdrive:rightmotor:1                                       4               # TALON SRX
hw:tankdrive:rightmotor:2                                       5               # TALON SRX
hw:tankdrive:rightmotor:3                                       6               # TALON SRX
hw:tankdrive:leftencoder:1                                      0               # Digital IO
hw:tankdrive:leftencoder:2                                      1               # Digital IO
hw:tankdrive:rightencoder:1                                     2               # Digital IO
hw:tankdrive:rightencoder:2                                     3               # Digital IO
hw:tankdrive:shifter                                            0               # Solenoid
hw:tankdrive:invert:motors:right                                true
hw:tankdrive:invert:encoders:right                              true

hw:hatchholder:arm                                              1               # Solenoid
hw:hatchholder:finger                                           2               # Solenoid
hw:hatchholder:sensor                                           10              # Digital IO

hw:hatchintake:motor                                            11              # Victor SPX
hw:hatchintake:sensor                                           12              # Digital IO
hw:hatchintake:solenoid                                         3               # Solenoid

hw:lifter:encoder1                                              6               # Digital IO
hw:lifter:encoder2                                              7               # Digital IO
hw:lifter:limit:bottom                                          8               # Digital IO
hw:lifter:limit:top                                             9               # Digital IO
hw:lifter:motor:1                                               8               # TalonSRX
hw:lifter:motor:2                                               9               # TalonSRX

hw:turntable:encoder1                                           4               # Digital IO
hw:turntable:encoder2                                           5               # Ditigal IO
hw:turntable:motor:1                                            7               # TALON SRX

hw:linesensor:front:0                                           21              # Digital IO
hw:linesensor:front:1                                           22              # Digital IO
hw:linesensor:front:2                                           23              # Digital IO

hw:linesensor:back:0                                            20              # Digital IO
hw:linesensor:back:1                                            19              # Digital IO
hw:linesensor:back:2                                            18              # Digital IO

hw:driverstation:hid:driver                                     0               # HID Device Index
hw:driverstation:hid:oi                                         2               # HID Device Index

hw:cargoholder:sensor                                           11              # Digital IO
hw:cargoholder:motor                                            10              # Victor SPX

hw:cargointake:motor                                            12              # Victor SPX
hw:cargointake:solenoid                                         5               # Solenoid

hw:climber:solenoid                                             6               # Solenoid

###################################################################
#
# The sections below describe the software parameters for the various
# robot subsystems
#
###################################################################

#
# Variables for the tankdrive subsystem code.  These are currently
# aligned with Phoenix as the basis for the Phaser code until we get
# a Phaser drivebase
#
tankdrive:inches_per_tick                                       0.010471976
tankdrive:width                                                 24.5
tankdrive:scrub                                                 0.9

tankdrive:follower:left:ka                                      0.0005
tankdrive:follower:left:kv                                      0.00555555555555
tankdrive:follower:left:kp                                      0.1
tankdrive:follower:left:kd                                      0.0

tankdrive:follower:right:ka                                     0.0005
tankdrive:follower:right:kv                                     0.00555555555555
tankdrive:follower:right:kp                                     0.1
tankdrive:follower:right:kd                                     0.0

tankdrive:follower:turn_correction                              0.0
tankdrive:follower:angle_decay                                  0.0

#
# Variables for the driver gamepad
#
driver:power:max                                                1.0
driver:power:default                                            0.6
driver:power:slowby                                             0.5
driver:power:tolerance                                          0.05
driver:power:nudge_straight                                     0.2
driver:power:nudge_rotate                                       0.2
driver:nudge_time                                               0.1

#
# Setup the data plotter
#
plotter:port                                                    5555

#
# Variables for the linefollower
#
linefollow:power                                                .4
linefollow:distance                                             16
linefollow:adjust                                               .35

#
# Variables for the turntable
#
turntable:keepout:minimum                                       -60
turntable:keepout:maximum                                       -30
turntable:degrees_per_tick                                      0.5
turntable:maxa                                                  45
turntable:maxd                                                  -45
turntable:maxv                                                  45
turntable:base                                                  0.0
turntable:threshold                                             1.0
turntable:follower:kv                                           0.011111
turntable:follower:ka                                           0.0
turntable:follower:kp                                           0.0
turntable:follower:kd                                           0.0
turntable:maxa

#
# Variables for the lifter
#
lifter:base							                            11.375
lifter:inches_per_tick                                          0.08327
lifter:max_height                                               86.0
lifter:min_height                                               11.375
lifter:threshold                                                1.0
lifter:maxv                                                     12
lifter:maxa                                                     12
lifter:maxd                                                     -12
lifter:follower:kp                                              0.4
lifter:follower:ka                                              0.03
lifter:follower:kv                                              0.018
lifter:follower:kd                                              0.0
lifter:hold:p                                                   -0.1
lifter:hold:i                                                   0.0
lifter:hold:d                                                   0.0
lifter:hold:f                                                   0.0
lifter:hold:a                                                   0.0
lifter:hold:min                                                 -0.5
lifter:hold:max                                                 0.5
lifter:hold:imax                                                0.0

cameratracker:distance_threshold                                0.0
cameratracker:yaw_threshold                                     0.0
cameratracker:rect_ratio_min                                    0.0
cameratracker:rect_ratio_max                                    0.0

drivebyvision:yaw_base_power                  0.2                  
drivebyvision:yaw_p                           -0.003
drivebyvision:yaw_threshold                   3.0
drivebyvision:lost_target_threshold           4
drivebyvision:outer_distance                  96.0
drivebyvision:inner:0                         0.90
drivebyvision:inner:1                         0.98
drivebyvision:inner:2                         1.02
drivebyvision:inner:3                         1.1
drivebyvision:outer:0                         0.90
drivebyvision:outer:1                         0.98
drivebyvision:outer:2                         1.02
drivebyvision:outer:3                         1.10
drivebyvision:scurve_base_power                 0.2
drivebyvision:scurve_turn_offset                0.1
drivebyvision:scurve_cycles                     100
drivebyvision:quit_threshold                   31.0

cargointake:collectpower                                        0.5
