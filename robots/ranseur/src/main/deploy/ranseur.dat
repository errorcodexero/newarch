#
# This file describes the phaser robot.
#

###################################################################################################
#
# Hardware definitions, this is the equivalent of the old signal power table, 
# at least the signal part of it.
#
###################################################################################################

#
# PLACEHOLDERS
#
hw:bunnyarm:solenoid                                            -1
hw:collector:tubsensor                                          -1 
collector:tubsensor:h2ldelay                                    -1
collector:tubsensor:l2hdelay                                    -1
hw:tubcollector:type                                            "victor_spx"
hw:tubcollector:canid                                           -1
hw:collector:clamp                                              -1

#
# Drivebase
#

if COMPETITION
hw:tankdrive:motors:left:1:canid                                1
hw:tankdrive:motors:left:2:canid                                2
hw:tankdrive:motors:left:3:canid                                3
hw:tankdrive:motors:right:1:canid                               4
hw:tankdrive:motors:right:2:canid                               5
hw:tankdrive:motors:right:3:canid                               6
hw:tankdrive:motors:left:1:type                                 "talon_srx"
hw:tankdrive:motors:left:2:type                                 "talon_srx"
hw:tankdrive:motors:left:3:type                                 "talon_srx"
hw:tankdrive:motors:right:1:type                                "talon_srx"
hw:tankdrive:motors:right:2:type                                "talon_srx"
hw:tankdrive:motors:right:3:type                                "talon_srx"
hw:tankdrive:leftencoder:1                                      2               # Digital IO
hw:tankdrive:leftencoder:2                                      3               # Digital IO
hw:tankdrive:rightencoder:1                                     1               # Digital IO
hw:tankdrive:rightencoder:2                                     0               # Digital IO
hw:tankdrive:invert:motors:left                                 true
hw:tankdrive:shifter                                            0               # Solenoid
endif





#
# Front line sensors
#
hw:linesensor:front:0                                           10              # Digital IO
hw:linesensor:front:1                                           11              # Digital IO
hw:linesensor:front:2                                           12              # Digital IO

#
# Back line sensors
#
hw:linesensor:back:0                                            13              # Digital IO
hw:linesensor:back:1                                            18              # Digital IO
hw:linesensor:back:2                                            19              # Digital IO

#
# Driver station
#
hw:driverstation:hid:driver                                     0               # HID Device Index
hw:driverstation:hid:oi                                         2               # HID Device Index

###################################################################
#
# The sections below describe the software parameters for the various
# robot subsystems
#
###################################################################

###################################################################################################
# misc
###################################################################################################

#
# Enable plotting.  Plot data is stored in the network tables and display
# programs read the data from the network tables
#
plotting:enabled                                               true


###################################################################################################
# tankdrive
###################################################################################################

#
# Variables for the tankdrive subsystem code.
#
tankdrive:inches_per_tick                                       0.010385891
tankdrive:width                                                 221425
tankdrive:scrub                                                 0.95177665

tankdrive:follower:left:kv1                                     180.45
tankdrive:follower:left:kv2                                     -19.35
tankdrive:follower:left:ka                                      0.0001
tankdrive:follower:left:kp                                      0.0003             # Recommended 0.02032 - 0.03048
tankdrive:follower:left:kd                                      0.0

tankdrive:follower:right:kv1                                    180.45
tankdrive:follower:right:kv2                                    -19.35
tankdrive:follower:right:ka                                     0.0001
tankdrive:follower:right:kp                                     0.0003             # Recommended 0.02032 - 0.03048
tankdrive:follower:right:kd                                     0.0

tankdrive:follower:turn_correction                              0
tankdrive:follower:angle_correction                             0.06

tankdrive:distance_action:maxa                                  36.0
tankdrive:distance_action:maxd                                  -36.0
tankdrive:distance_action:maxv                                  36.0

tankdrive:distance_action:angle_pid:p                           0.0
tankdrive:distance_action:angle_pid:i                           0.0
tankdrive:distance_action:angle_pid:d                           0.0
tankdrive:distance_action:angle_pid:f                           0.0
tankdrive:distance_action:angle_pid:min                         -1.0
tankdrive:distance_action:angle_pid:max                         1.0
tankdrive:distance_action:angle_pid:imax                        0.0

tankdrive:distance_action:distance_threshold                    999.0
tankdrive:distance_action:profile_outdated_error_long           8.0
tankdrive:distance_action:profile_outdated_error_short          4.0
tankdrive:distance_action:profile_outdated_error_dist           12.0


###################################################################################################
# cameratracker
###################################################################################################

cameratracker:distance_threshold                                48.0            # 60
cameratracker:rect_ratio_min                                    0.9
cameratracker:rect_ratio_max                                    1.1

###################################################################################################
# drive by vision (simple P only control)
###################################################################################################

drivebyvision:yaw_base_power                                    0.30
drivebyvision:yaw_p                                             0.03

###################################################################################################
# drive by line follower
###################################################################################################

linefollower:front:power                                          0.25
linefollower:front:distance                                       12
linefollower:front:adjust                                         0.0

linefollower:back:power                                           -0.25
linefollower:back:distance                                        12
linefollower:back:adjust                                          -0.0

linefollower:stalled_threshold                                    0.1

if COMPETITION

climb:deploy_delay                                              1.25

climb:drive:left                                                -0.4
climb:drive:right                                               -0.4
climb:drive:duration                                            4.0

climb:backup:left                                               0.0
climb:backup:right                                              0.0
climb:backup:duration                                           0.0

climb:velocity_samples                                          16
climb:still_threshold                                           2           # in / sec
climb:backup_delay                                              2.5

#
# Variables for the driver gamepad
#
driver:power:max                                                1.0
driver:power:default                                            0.6
driver:turn:max                                                 0.8
driver:turn:default                                             0.4
driver:power:slowby                                             0.5
driver:power:tolerance                                          0.05
driver:power:nudge_straight                                     0.2
driver:power:nudge_rotate                                       0.2
driver:nudge_time                                               0.1
driver:zerolevel                                                0.1

oi:go                                                           10                  # Button
oi:calibrate                                                    16                  # Button
oi:reverse                                                      7                   # Button
oi:automode                                                     6                   # Axis
oi:tracking_viewing_nothing_switch                              3                   # Axis
oi:extra_arm_button                                             false
