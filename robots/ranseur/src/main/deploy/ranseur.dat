#
# This file describes the ranseur robot.
#

###################################################################################################
#
# Hardware definitions, this is the equivalent of the old signal power table, 
# at least the signal part of it.
#
###################################################################################################

#
# Hardware
#
hw:bunnyarm:solenoid                                            1

hw:tubcollector:type                                            "victor_spx"
hw:tubcollector:canid                                            9
hw:tubcollector:clamp                                           0
hw:tubcollector:tubsensor                                       4                           # Digital IO

hw:tubarm:motor:canid                                           7
hw:tubarm:motor:type                                            "victor_spx"
hw:tubarm:encoder:1                                             0
hw:tubarm:encoder:2                                             -1

hw:tubwrist:motor:canid                                         8
hw:tubwrist:motor:type                                          "victor_spx"
hw:tubwrist:encoder:1                                           1
hw:tubwrist:encoder:2                                           -1

hw:tankdrive:motors:left:1:canid                                1
hw:tankdrive:motors:left:2:canid                                2
hw:tankdrive:motors:left:3:canid                                3
hw:tankdrive:motors:right:1:canid                               4
hw:tankdrive:motors:right:2:canid                               5
hw:tankdrive:motors:right:3:canid                               6
hw:tankdrive:motors:left:1:type                                 "sparkmax_brushless"
hw:tankdrive:motors:left:2:type                                 "sparkmax_brushless"
hw:tankdrive:motors:left:3:type                                 "sparkmax_brushless"
hw:tankdrive:motors:right:1:type                                "sparkmax_brushless"
hw:tankdrive:motors:right:2:type                                "sparkmax_brushless"
hw:tankdrive:motors:right:3:type                                "sparkmax_brushless"
hw:tankdrive:leftencoder:1                                      0                            # Digital IO
hw:tankdrive:leftencoder:2                                      1                            # Digital IO
hw:tankdrive:rightencoder:1                                     2                            # Digital IO
hw:tankdrive:rightencoder:2                                     3                            # Digital IO
hw:tankdrive:invert:motors:left                                 true

#
# Driver station
#
hw:driverstation:hid:driver                                     0                            # HID Device Index
hw:driverstation:hid:oi                                         2                            # HID Device Index

###################################################################
#
# The sections below describe the software parameters for the various
# robot subsystems
#
###################################################################

###################################################################################################
# misc
###################################################################################################

#
# Enable plotting.  Plot data is stored in the network tables and display
# programs read the data from the network tables
#
plotting:enabled                                               true


###################################################################################################
# tankdrive
###################################################################################################

#
# Variables for the tankdrive subsystem code.
#
tankdrive:inches_per_tick                                       0.010385891
tankdrive:width                                                 221425
tankdrive:scrub                                                 0.95177665

tankdrive:follower:left:kv1                                     180.45
tankdrive:follower:left:kv2                                     -19.35
tankdrive:follower:left:ka                                      0.0001
tankdrive:follower:left:kp                                      0.0003             # Recommended 0.02032 - 0.03048
tankdrive:follower:left:kd                                      0.0

tankdrive:follower:right:kv1                                    180.45
tankdrive:follower:right:kv2                                    -19.35
tankdrive:follower:right:ka                                     0.0001
tankdrive:follower:right:kp                                     0.0003             # Recommended 0.02032 - 0.03048
tankdrive:follower:right:kd                                     0.0

tankdrive:follower:turn_correction                              0
tankdrive:follower:angle_correction                             0.06

tankdrive:distance_action:maxa                                  36.0
tankdrive:distance_action:maxd                                  -36.0
tankdrive:distance_action:maxv                                  36.0

tankdrive:distance_action:angle_pid:p                           0.0
tankdrive:distance_action:angle_pid:i                           0.0
tankdrive:distance_action:angle_pid:d                           0.0
tankdrive:distance_action:angle_pid:f                           0.0
tankdrive:distance_action:angle_pid:min                         -1.0
tankdrive:distance_action:angle_pid:max                         1.0
tankdrive:distance_action:angle_pid:imax                        0.0

tankdrive:distance_action:distance_threshold                    999.0
tankdrive:distance_action:profile_outdated_error_long           8.0
tankdrive:distance_action:profile_outdated_error_short          4.0
tankdrive:distance_action:profile_outdated_error_dist           12.0

###################################################################################################
# bunnyarm
###################################################################################################
bunnyarm:deploy:time                                             0.5

###################################################################################################
# tubcollector
###################################################################################################
tubcollector:eject:power                                        0.5
tubcollector:eject:duration                                     2.0      
tubcollector:collect:power                                      -0.5
tubcollector:collect:duration                                   0.5                                        
tubcollector:tubsensor:h2ldelay                                 0
tubcollector:tubsensor:l2hdelay                                 0

###################################################################################################
# tubwrist
###################################################################################################
tubwrist:encoder:units_per_tick                              -1
tubwrist:encoder:zero_ticks                                  -1

###################################################################################################
# tubarm
###################################################################################################
tubarm:encoder:units_per_tick                              -1
tubarm:encoder:zero_ticks                                  -1

###################################################################################################
# cameratracker
###################################################################################################

cameratracker:distance_threshold                                48.0
cameratracker:rect_ratio_min                                    0.9
cameratracker:rect_ratio_max                                    1.1

###################################################################################################
# drive by vision (simple P only control)
###################################################################################################

drivebyvision:yaw_base_power                                    0.30
drivebyvision:yaw_p                                             0.03

###################################################################################################
# Driver gamepad
###################################################################################################

driver:power:max                                                1.0
driver:power:default                                            0.6
driver:turn:max                                                 0.8
driver:turn:default                                             0.4
driver:power:slowby                                             0.5
driver:power:tolerance                                          0.05
driver:power:nudge_straight                                     0.2
driver:power:nudge_rotate                                       0.2
driver:nudge_time                                               0.1
driver:zerolevel                                                0.1

###################################################################################################
# Variables for the OI
###################################################################################################