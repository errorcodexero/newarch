#!/bin/bash

if [ "$#" -ne 2 ]; then
    echo "Invalid number of arguments, expected 2"
    echo "usage: runme mode eventfile"
    echo "  mode: auto teleop test"
    echo "  eventfile: name of file containing events"
    exit 1
fi

mkdir -p logs
extra="--events $2"

autotime=0.0
teleoptime=0.0
testtime=0.0
starttime=0.0

if [ $1 = "auto" ]; then
    autotime=60.0
fi

if [ $1 = "teleop" ]; then
    teleoptime=300.0
fi

makebuild/SIMULATOR/Debug/phaser/phaser \
    --simfile logs/SIM\
    --robotfile logs/ROBOT\
    --test $testtime\
    --start $starttime\
    --auto $autotime\
    --oper $teleoptime\
    --simscreen \
    $extra

